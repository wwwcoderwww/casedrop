{"remainingRequest":"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/thread-loader/dist/cjs.js!/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/babel-loader/lib/index.js!/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/src/components/modals/SingleWonItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/src/components/modals/SingleWonItem.vue","mtime":1559595585035},{"path":"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/cache-loader/dist/cjs.js","mtime":1559595767902},{"path":"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/@babel/runtime/helpers/builtin/es6/asyncToGenerator\";\nimport _objectSpread from \"/home/v/volodkji/andy.puduland.com/public_html/vuejs/casadrop/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapMutations } from 'vuex';\nimport Api from '@/api';\nimport constants from '@/constants';\nimport ProgressBar from 'progressbar.js';\nexport default {\n  computed: _objectSpread({}, mapState('modals', ['wonItems']), {\n    wonItem: function wonItem() {\n      return this.wonItems[0];\n    }\n  }),\n  data: function data() {\n    return {\n      loading: false\n    };\n  },\n  mounted: function mounted() {\n    this.handleScroll(this.$refs.weaponItem);\n  },\n  methods: _objectSpread({}, mapMutations('modals', ['closeModals', 'setStateModals']), {\n    toUser: function toUser() {\n      this.closeModals();\n      this.$router.push('/user');\n    },\n    sell: function () {\n      var _sell = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.loading = true;\n                _context.next = 4;\n                return Api.sellCase(this.wonItem.id);\n\n              case 4:\n                _ref = _context.sent;\n                data = _ref.data;\n\n                if (data.result) {\n                  this.setStateModals({\n                    type: 'success',\n                    show: true,\n                    msg: data.msg\n                  });\n                } else {\n                  this.setStateModals({\n                    type: 'error',\n                    show: true,\n                    msg: data.msg\n                  });\n                }\n\n                this.loading = false;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                throw new Error(_context.t0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      return function sell() {\n        return _sell.apply(this, arguments);\n      };\n    }(),\n    weaponImgUrl: function weaponImgUrl(imgId) {\n      return \"\".concat(constants.headerImgUrl).concat(imgId);\n    },\n    handleScroll: function handleScroll(e) {\n      var circleCounter = e.querySelectorAll('svg').length;\n      var element = e.querySelector('.popup-single-item__circle');\n\n      if (!circleCounter) {\n        var circle = new ProgressBar.Circle(element, {\n          color: '#000',\n          strokeWidth: 2,\n          trailColor: 'transparent',\n          easing: 'easeInOut'\n        });\n        circle.animate(1.9, {\n          duration: 2000\n        });\n      }\n    }\n  })\n};",{"version":3,"sources":["SingleWonItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,SAAA,QAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,GAAA,MAAA,OAAA;AACA,OAAA,SAAA,MAAA,aAAA;AACA,OAAA,WAAA,MAAA,gBAAA;AAEA,eAAA;AACA,8BACA,SAAA,QAAA,EAAA,CAAA,UAAA,CAAA,CADA;AAEA,WAFA,qBAEA;AACA,aAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA;AAJA,IADA;AAOA,MAPA,kBAOA;AACA,WAAA;AACA,eAAA;AADA,KAAA;AAGA,GAXA;AAYA,SAZA,qBAYA;AACA,SAAA,YAAA,CAAA,KAAA,KAAA,CAAA,UAAA;AACA,GAdA;AAeA,6BACA,aAAA,QAAA,EAAA,CAAA,aAAA,EAAA,gBAAA,CAAA,CADA;AAEA,UAFA,oBAEA;AACA,WAAA,WAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,KALA;AAMA,QANA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,qBAAA,OAAA,GAAA,IAAA;AARA;AAAA,uBASA,IAAA,QAAA,CAAA,KAAA,OAAA,CAAA,EAAA,CATA;;AAAA;AAAA;AASA,oBATA,QASA,IATA;;AAUA,oBAAA,KAAA,MAAA,EAAA;AACA,uBAAA,cAAA,CAAA;AAAA,0BAAA,SAAA;AAAA,0BAAA,IAAA;AAAA,yBAAA,KAAA;AAAA,mBAAA;AACA,iBAFA,MAEA;AACA,uBAAA,cAAA,CAAA;AAAA,0BAAA,OAAA;AAAA,0BAAA,IAAA;AAAA,yBAAA,KAAA;AAAA,mBAAA;AACA;;AAEA,qBAAA,OAAA,GAAA,KAAA;AAhBA;AAAA;;AAAA;AAAA;AAAA;AAAA,sBAkBA,IAAA,KAAA,aAlBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAqBA,gBArBA,wBAqBA,KArBA,EAqBA;AACA,uBAAA,UAAA,YAAA,SAAA,KAAA;AACA,KAvBA;AAwBA,gBAxBA,wBAwBA,CAxBA,EAwBA;AACA,UAAA,gBAAA,EAAA,gBAAA,CAAA,KAAA,EAAA,MAAA;AACA,UAAA,UAAA,EAAA,aAAA,CAAA,4BAAA,CAAA;;AAEA,UAAA,CAAA,aAAA,EAAA;AACA,YAAA,SAAA,IAAA,YAAA,MAAA,CAAA,OAAA,EAAA;AACA,iBAAA,MADA;AAEA,uBAAA,CAFA;AAGA,sBAAA,aAHA;AAIA,kBAAA;AAJA,SAAA,CAAA;AAOA,eAAA,OAAA,CAAA,GAAA,EAAA;AACA,oBAAA;AADA,SAAA;AAGA;AACA;AAxCA;AAfA,CAAA","sourcesContent":["<template>\n  <div class=\"popup-single\" :class=\"`popup-single--${wonItem.rarity}`\">\n    <div class=\"popup-triangle\"></div>\n    <div class=\"popup-close-btn\" @click=\"closeModals\">\n      <span class=\"icon drop-close\"></span>\n    </div>\n\n    <div class=\"spinner__wrapper--multimodal\" v-if=\"loading\">\n      <spinner></spinner>\n    </div>\n\n    <template v-else>\n      <div class=\"popup-single__header\">\n        <div class=\"popup-single__title\">Your winning</div>\n        <div class=\"popup-single__name\">{{ wonItem.name_hash }}</div>\n      </div>\n\n      <div class=\"popup-single-item\" ref=\"weaponItem\">\n        <div class=\"popup-single-item__bg-wrapper\">\n          <div class=\"popup-single-item__circle\"></div>\n          <div  v-for=\"(item, i) in 4\" \n                class=\"popup-single-item__bg\" :key=\"i\" \n                :class=\"`popup-single-item__bg--${i + 1}`\">\n          </div>\n        </div>\n\n        <img class=\"popup-single-item__img\" :src=\"weaponImgUrl(wonItem.image_id)\" alt=\"\">\n\n      </div>\n\n      <div class=\"popup-btn-block\">\n        <div class=\"btn-row\">\n          <button class=\"hover-btn popup-nover-btn\" @click=\"closeModals\" data-text=\"Try again\"></button>\n          <button class=\"hover-btn popup-nover-btn\" @click=\"toUser\" data-text=\"My items\"></button>\n        </div>\n        <button class=\"gradient-btn popup-sell-btn\" @click=\"sell\">Sell item for ${{ wonItem.price }}</button>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex';\nimport Api from '@/api';\nimport constants from '@/constants';\nimport ProgressBar from 'progressbar.js';\n\nexport default {\n  computed: {\n    ...mapState('modals', ['wonItems']),\n    wonItem() {\n      return this.wonItems[0];\n    }\n  },\n  data() {\n    return {\n      loading: false,\n    }\n  },\n  mounted() {\n    this.handleScroll(this.$refs.weaponItem);\n  },\n  methods: {\n    ...mapMutations('modals', ['closeModals', 'setStateModals']),\n    toUser() {\n      this.closeModals();\n      this.$router.push('/user');\n    },\n    async sell() {\n      try {\n        this.loading = true;\n        const { data } = await Api.sellCase(this.wonItem.id);\n        if (data.result) {\n          this.setStateModals({ type: 'success', show: true, msg: data.msg });\n        } else {\n          this.setStateModals({ type: 'error', show: true, msg: data.msg });\n        }\n        \n        this.loading = false;\n      } catch (e) {\n        throw new Error(e);\n      }\n    },\n    weaponImgUrl(imgId) {\n      return `${constants.headerImgUrl}${imgId}`;\n    },\n    handleScroll(e) {\n      const circleCounter = e.querySelectorAll('svg').length;\n      const element = e.querySelector('.popup-single-item__circle');\n\n      if (!circleCounter) {\n        var circle = new ProgressBar.Circle(element, {\n          color: '#000',\n          strokeWidth: 2,\n          trailColor: 'transparent',\n          easing: 'easeInOut'\n        });\n\n        circle.animate(1.9, {\n          duration: 2000\n        });\n      }\n    }\n  }\n}\n</script>\n\n\n<style lang=\"scss\">\n@import '@/assets/style/partials/_colors.scss';\n.popup-single {\n  width: 340px;\n  background: #2C2438;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 11;\n  padding: 20px 40px 40px 40px;\n  border-top-width: 3px;\n  border-top-style: solid;\n  &__header {\n    text-transform: uppercase;\n    text-align: center;\n    margin-bottom: 15px;\n  }\n  &__title {\n    font-size: 17px;\n    // color: $light-grey-text;\n    text-align: center;\n    text-transform: uppercase;\n  }\n\n  &-item {\n    height: 200px;\n    width: 200px;\n    position: relative;\n    margin: auto;\n    margin-bottom: 20px;\n    &__bg-wrapper {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    &__circle {\n      width: 200px;\n      height: 200px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%) rotate(198deg);\n    }\n\n    &__bg {\n      border-radius: 50%;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      animation: inner-circle .5s;\n      transform: translate(-50%, -50%);\n    }\n\n    &__img {\n      height: 100%;\n      position: absolute;\n      top: 60%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      z-index: 0;\n      pointer-events: none;\n      display: block;\n      max-width: 100%;\n    }\n    &__bg--4 {\n      width: 42px;\n      height: 42px;\n      animation-delay: .2s;\n      transition: all .5s;\n    }\n    &__bg--3 {\n      width: 94px;\n      height: 94px;\n      opacity: .25;\n      animation-delay: .4s;\n      transition: all .5s;\n    }\n    &__bg--2 {\n      width: 140px;\n      height: 140px;\n      opacity: .053;\n      animation-delay: .6s;\n      transition: all .5s;\n    }\n    &__bg--1 {\n      width: 200px;\n      height: 200px;\n      opacity: .03;\n      animation-delay: .8s;\n      transition: all .5s;\n    }\n  }\n}\n\n@each $name, $color in $weaponColors {\n  .popup-single--#{$name} {\n    border-top-color: $color;\n    .popup-single-item__bg {\n      background: $color;\n    }\n    .popup-triangle {\n      border-top-color: $color;\n    }\n    .popup-single__name {\n      color: $color;\n    }\n    .popup-single-item__bg-wrapper {\n      path:nth-child(2) {\n        stroke: $color;\n      }\n    }\n  }\n}\n\n</style>\n\n"],"sourceRoot":"src/components/modals"}]}